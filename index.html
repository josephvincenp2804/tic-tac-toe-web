<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe vs AI</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .container { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); max-width: 500px; width: 100%; text-align: center; position: relative; }
        .hidden { display: none; }
        h1 { color: #333; margin-bottom: 20px; font-size: 2.5em; }
        .start-screen { text-align: center; padding: 30px; }
        .start-screen h2 { color: #333; margin-bottom: 30px; font-size: 2.2em; }
        .start-screen p { color: #666; margin-bottom: 30px; font-size: 1.2em; line-height: 1.6; }
        .features-image { margin: 25px 0; text-align: center; }
        .feature-img { max-width: 200px; height: auto; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease; }
        .feature-img:hover { transform: scale(1.05); }
        .btn-start { background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; padding: 15px 40px; font-size: 1.3em; border-radius: 50px; cursor: pointer; transition: all 0.3s; margin-top: 20px; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3); }
        .btn-start:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4); }
        .welcome-screen { text-align: center; padding: 20px; }
        .welcome-screen h2 { color: #333; margin-bottom: 20px; }
        .name-input { margin: 20px 0; }
        .name-input input { padding: 12px; font-size: 1.1em; border: 2px solid #ddd; border-radius: 8px; width: 200px; text-align: center; margin-bottom: 15px; }
        .name-input button { background: #28a745; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 1.1em; width: 200px; }
        .difficulty-selector { margin: 20px 0; }
        .difficulty-selector h3 { margin-bottom: 10px; color: #333; }
        .mode-btn { background: #6c757d; color: white; border: none; padding: 10px 15px; margin: 5px; border-radius: 5px; cursor: pointer; transition: background 0.3s; width: 100px; }
        .mode-btn.active { background: #007bff; }
        .mode-btn:hover { background: #0056b3; }
        .game-info { margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; border: 2px solid #e9ecef; }
        .status { font-size: 1.2em; font-weight: bold; color: #495057; margin-bottom: 10px; }
        .player-info { display: flex; justify-content: space-around; margin: 10px 0; }
        .player { padding: 8px 15px; border-radius: 5px; font-weight: bold; }
        .player.human { background: #d4edda; color: #155724; }
        .player.ai { background: #f8d7da; color: #721c24; }
        .board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px auto; max-width: 300px; }
        .cell { aspect-ratio: 1; background: #f8f9fa; border: 3px solid #dee2e6; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2.5em; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .cell:hover { background: #e9ecef; transform: scale(1.05); }
        .cell.x { color: #dc3545; }
        .cell.o { color: #007bff; }
        .cell.winner { background: #d4edda; border-color: #28a745; animation: pulse 1s infinite; }
        .cell:disabled { cursor: not-allowed; opacity: 0.7; }
        .cell:disabled:hover { background: #f8f9fa; transform: none; }
        .controls { margin-top: 20px; display: flex; justify-content: center; gap: 10px; }
        .btn { background: #28a745; color: white; border: none; padding: 12px 25px; font-size: 1.1em; border-radius: 8px; cursor: pointer; transition: background 0.3s; }
        .btn:hover { background: #218838; }
        .btn-reset { background: #6c757d; }
        .btn-reset:hover { background: #5a6268; }
        .btn-quit { background: #dc3545; }
        .btn-quit:hover { background: #c82333; }
        .message { margin-top: 15px; padding: 10px; border-radius: 5px; font-weight: bold; }
        .message.win { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .message.lose { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .message.tie { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .countdown { font-size: 1.2em; font-weight: bold; color: #007bff; margin-top: 10px; }
        .confetti { position: absolute; width: 10px; height: 10px; background: #ff0000; opacity: 0.8; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes confetti-fall { 0% { transform: translateY(-100px) rotate(0deg); opacity: 1; } 100% { transform: translateY(500px) rotate(360deg); opacity: 0; } }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-30px);} 60% {transform: translateY(-15px);} }
        .celebration { animation: bounce 2s infinite; color: #ff6b6b; font-size: 3em; }
        @media (max-width: 480px) { .container { padding: 20px; } h1 { font-size: 2em; } .cell { font-size: 2em; } .controls { flex-direction: column; } .btn { width: 100%; } .start-screen h2 { font-size: 1.8em; } .btn-start { padding: 12px 30px; font-size: 1.1em; } }
    </style>
</head>
<body>
    <div class="container">
        <div id="startScreen" class="start-screen">
            <h2>ðŸŽ¯ Tic-Tac-Toe Challenge! ðŸŽ¯</h2>
            <p>Get ready to test your skills against AI opponents of varying difficulty levels!</p>
            <div class="features-image">
                <img src="https://cdn-icons-png.flaticon.com/512/10199/10199746.png" alt="Tic-Tac-Toe Game Features" class="feature-img">
            </div>
            <p><strong>How to Play:</strong> Get three in a row horizontally, vertically, or diagonally to win!</p>
            <button class="btn-start" onclick="showWelcomeScreen()">Let's Start! ðŸš€</button>
        </div>

        <div id="welcomeScreen" class="welcome-screen hidden">
            <h2>ðŸŽ® Welcome to Tic-Tac-Toe! ðŸŽ®</h2>
            <div class="name-input">
                <input type="text" id="playerName" placeholder="Enter your name" maxlength="15">
                <div class="difficulty-selector">
                    <h3>Select Difficulty:</h3>
                    <button class="mode-btn active" onclick="selectMode('easy')">Easy</button>
                    <button class="mode-btn" onclick="selectMode('medium')">Medium</button>
                    <button class="mode-btn" onclick="selectMode('hard')">Hard</button>
                </div>
                <button onclick="startGame()">Start Game</button>
            </div>
            <p>Get ready to challenge the AI!</p>
        </div>

        <div id="gameScreen" class="hidden">
            <h1>ðŸŽ® Tic-Tac-Toe vs AI</h1>
            <div class="game-info">
                <div class="status" id="status">Your Turn (X)</div>
                <div class="player-info">
                    <div class="player human" id="playerHuman">You: X</div>
                    <div class="player ai">AI: O</div>
                </div>
                <div class="mode-info" id="modeInfo">Difficulty: Easy</div>
            </div>
            <div class="board" id="board"></div>
            <div class="controls">
                <button class="btn btn-reset" onclick="resetGame()">New Game</button>
                <button class="btn btn-quit" onclick="quitToStart()">Quit to Menu</button>
            </div>
            <div class="message" id="message" style="display: none;"></div>
            <div class="countdown" id="countdown" style="display: none;"></div>
        </div>
    </div>

    <script>
        class TicTacToeGame {
            constructor() {
                this.board = [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '];
                this.currentPlayer = 'X';
                this.winner = null;
                this.gameOver = false;
                this.mode = 'easy';
                this.playerName = "Player";
            }

            resetGame() {
                this.board = [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '];
                this.currentPlayer = 'X';
                this.winner = null;
                this.gameOver = false;
            }

            makeMove(position) {
                if (this.gameOver || this.board[position] !== ' ') {
                    return false;
                }

                this.board[position] = this.currentPlayer;

                if (this.checkWinner(this.currentPlayer)) {
                    this.winner = this.currentPlayer;
                    this.gameOver = true;
                } else if (!this.board.includes(' ')) {
                    this.gameOver = true;
                } else {
                    this.currentPlayer = 'O';
                }

                return true;
            }

            checkWinner(player) {
                const winPatterns = [
                    [0, 1, 2], [3, 4, 5], [6, 7, 8],
                    [0, 3, 6], [1, 4, 7], [2, 5, 8],
                    [0, 4, 8], [2, 4, 6]
                ];

                return winPatterns.some(pattern =>
                    pattern.every(index => this.board[index] === player)
                );
            }

            getAIMoveEasy() {
                const availableMoves = this.board.map((cell, index) => cell === ' ' ? index : null).filter(index => index !== null);
                return availableMoves.length > 0 ? availableMoves[Math.floor(Math.random() * availableMoves.length)] : null;
            }

            getAIMoveMedium() {
                const availableMoves = this.board.map((cell, index) => cell === ' ' ? index : null).filter(index => index !== null);

                for (let move of availableMoves) {
                    this.board[move] = 'O';
                    if (this.checkWinner('O')) {
                        this.board[move] = ' ';
                        return move;
                    }
                    this.board[move] = ' ';
                }

                for (let move of availableMoves) {
                    this.board[move] = 'X';
                    if (this.checkWinner('X')) {
                        this.board[move] = ' ';
                        return move;
                    }
                    this.board[move] = ' ';
                }

                if (Math.random() < 0.7) {
                    const smartMoves = availableMoves.filter(move => move === 4 || [0, 2, 6, 8].includes(move));
                    if (smartMoves.length > 0) {
                        return smartMoves[Math.floor(Math.random() * smartMoves.length)];
                    }
                }

                return availableMoves[Math.floor(Math.random() * availableMoves.length)];
            }

            getAIMoveHard() {
                let bestScore = -Infinity;
                let bestMove = null;

                for (let i = 0; i < 9; i++) {
                    if (this.board[i] === ' ') {
                        this.board[i] = 'O';
                        let score = this.minimax(0, false);
                        this.board[i] = ' ';
                        if (score > bestScore) {
                            bestScore = score;
                            bestMove = i;
                        }
                    }
                }
                return bestMove;
            }

            minimax(depth, isMaximizing) {
                if (this.checkWinner('O')) return 1;
                if (this.checkWinner('X')) return -1;
                if (!this.board.includes(' ')) return 0;

                if (isMaximizing) {
                    let bestScore = -Infinity;
                    for (let i = 0; i < 9; i++) {
                        if (this.board[i] === ' ') {
                            this.board[i] = 'O';
                            let score = this.minimax(depth + 1, false);
                            this.board[i] = ' ';
                            bestScore = Math.max(score, bestScore);
                        }
                    }
                    return bestScore;
                } else {
                    let bestScore = Infinity;
                    for (let i = 0; i < 9; i++) {
                        if (this.board[i] === ' ') {
                            this.board[i] = 'X';
                            let score = this.minimax(depth + 1, true);
                            this.board[i] = ' ';
                            bestScore = Math.min(score, bestScore);
                        }
                    }
                    return bestScore;
                }
            }

            makeAIMove() {
                if (this.currentPlayer !== 'O' || this.gameOver) return false;

                let aiMove;
                if (this.mode === 'easy') {
                    aiMove = this.getAIMoveEasy();
                } else if (this.mode === 'medium') {
                    aiMove = this.getAIMoveMedium();
                } else {
                    aiMove = this.getAIMoveHard();
                }

                if (aiMove !== null) {
                    this.board[aiMove] = 'O';
                    if (this.checkWinner('O')) {
                        this.winner = 'O';
                        this.gameOver = true;
                    } else if (!this.board.includes(' ')) {
                        this.gameOver = true;
                    } else {
                        this.currentPlayer = 'X';
                    }
                    return true;
                }
                return false;
            }

            getGameState() {
                return {
                    board: [...this.board],
                    current_player: this.currentPlayer,
                    winner: this.winner,
                    game_over: this.gameOver,
                    mode: this.mode,
                    player_name: this.playerName
                };
            }
        }

        let game = new TicTacToeGame();
        let currentGameMode = 'easy';
        let playerName = 'Player';
        let countdownTimer = null;

        function showWelcomeScreen() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('playerName').focus();
        }

        function showStartScreen() {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            clearInterval(countdownTimer);
            document.getElementById('countdown').style.display = 'none';
            document.getElementById('countdown').textContent = '';
        }

        function selectMode(mode) {
            currentGameMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function startGame() {
            const nameInput = document.getElementById('playerName');
            const name = nameInput.value.trim();
            if (name) {
                playerName = name;
                game.playerName = name;
                game.mode = currentGameMode;
                game.resetGame();
                document.getElementById('welcomeScreen').classList.add('hidden');
                document.getElementById('gameScreen').classList.remove('hidden');
                initializeBoard();
                updatePlayerDisplay();
                updateModeDisplay();
            } else {
                alert('Please enter your name to start the game!');
                nameInput.focus();
            }
        }

        function updatePlayerDisplay() {
            document.getElementById('playerHuman').textContent = `${playerName}: X`;
        }

        function updateModeDisplay() {
            const modeNames = { 'easy': 'Easy', 'medium': 'Medium', 'hard': 'Hard' };
            document.getElementById('modeInfo').textContent = `Difficulty: ${modeNames[currentGameMode]}`;
        }

        function initializeBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.addEventListener('click', () => makeMove(i));
                board.appendChild(cell);
            }
            updateBoard();
        }

        function makeMove(position) {
            if (game.currentPlayer === 'X' && !game.gameOver) {
                const success = game.makeMove(position);
                if (success) {
                    if (!game.gameOver) {
                        setTimeout(() => {
                            game.makeAIMove();
                            updateBoard();
                        }, 500);
                    }
                    updateBoard();
                }
            }
        }

        function updateBoard() {
            const gameState = game.getGameState();
            const cells = document.querySelectorAll('.cell');
            const status = document.getElementById('status');
            const message = document.getElementById('message');
            const countdown = document.getElementById('countdown');
            
            gameState.board.forEach((cell, index) => {
                cells[index].textContent = cell;
                cells[index].className = 'cell';
                if (cell === 'X') cells[index].classList.add('x');
                if (cell === 'O') cells[index].classList.add('o');
                if (cell !== ' ' || gameState.game_over) {
                    cells[index].style.pointerEvents = 'none';
                } else {
                    cells[index].style.pointerEvents = 'auto';
                }
            });
            
            if (gameState.game_over) {
                if (gameState.winner === 'X') {
                    status.textContent = `${playerName} Wins! ðŸŽ‰`;
                    message.textContent = `Congratulations ${playerName}! You're a Tic-Tac-Toe champion! ðŸ†`;
                    message.className = 'message win';
                    message.style.display = 'block';
                    celebrateWin();
                    startCountdown();
                } else if (gameState.winner === 'O') {
                    status.textContent = 'AI Wins! ðŸ¤–';
                    message.textContent = `Better luck next time ${playerName}! The AI was too strong this round.`;
                    message.className = 'message lose';
                    message.style.display = 'block';
                    startCountdown();
                } else {
                    status.textContent = "It's a Tie!";
                    message.textContent = `Good game ${playerName}! It was a close match!`;
                    message.className = 'message tie';
                    message.style.display = 'block';
                    startCountdown();
                }
            } else {
                if (gameState.current_player === 'X') {
                    status.textContent = `${playerName}'s Turn (X)`;
                    message.style.display = 'none';
                    countdown.style.display = 'none';
                } else {
                    status.textContent = "AI's Turn (O)";
                    message.style.display = 'none';
                    countdown.style.display = 'none';
                }
            }
        }

        function startCountdown() {
            let timeLeft = 10;
            const countdown = document.getElementById('countdown');
            countdown.style.display = 'block';
            countdownTimer = setInterval(() => {
                countdown.textContent = `New game starting in ${timeLeft} seconds...`;
                timeLeft--;
                if (timeLeft < 0) {
                    clearInterval(countdownTimer);
                    resetGame();
                }
            }, 1000);
        }

        function celebrateWin() {
            const container = document.querySelector('.container');
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = 'ðŸŽ‰ðŸ†ðŸŽŠ';
            celebration.style.position = 'absolute';
            celebration.style.top = '50%';
            celebration.style.left = '50%';
            celebration.style.transform = 'translate(-50%, -50%)';
            celebration.style.zIndex = '1000';
            celebration.style.fontSize = '4em';
            container.appendChild(celebration);
            for (let i = 0; i < 50; i++) {
                createConfetti(container);
            }
            setTimeout(() => {
                celebration.remove();
            }, 3000);
        }

        function createConfetti(container) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.width = Math.random() * 10 + 5 + 'px';
            confetti.style.height = Math.random() * 10 + 5 + 'px';
            confetti.style.animation = `confetti-fall ${Math.random() * 3 + 2}s linear forwards`;
            container.appendChild(confetti);
            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }

        function resetGame() {
            clearInterval(countdownTimer);
            game.resetGame();
            updateBoard();
        }

        function quitToStart() {
            showStartScreen();
        }

        document.getElementById('playerName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startGame();
            }
        });
    </script>
</body>
</html>
